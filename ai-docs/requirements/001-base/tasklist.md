# タスクリスト（001-base）

## クリティカルパス概要

```
フェーズ1: 基盤構築（認証・ユーザー管理）
  ↓
フェーズ2: 営業支援会社の基本機能（顧客・プロジェクト管理）
  ↓
フェーズ3: リスト管理機能
  ↓
フェーズ4: ワーカー管理・割り当て機能
  ↓
フェーズ5: ワーカー作業機能
  ↓
フェーズ6: 進捗・分析機能
  ↓
フェーズ7: 請求管理機能
```

---

## フェーズ1: 基盤構築（認証・ユーザー管理）

### バックエンド

- [ ] **1.1 データベーススキーマ設計**
  - ユーザー、組織、ロール、権限テーブルの設計
  - マルチテナント対応の設計

- [ ] **1.2 認証機能の実装**
  - ユーザー登録API
  - ログインAPI（JWT認証）
  - ログアウトAPI
  - パスワードリセット機能

- [ ] **1.3 ユーザー管理API**
  - ユーザーCRUD API
  - ロール管理（営業支援会社、顧客、ワーカー）
  - 組織管理（営業支援会社組織、顧客組織）
  - 組織内ユーザー管理API（複数担当者登録）

- [ ] **1.4 認可機能の実装**
  - ロールベースアクセス制御（RBAC）
  - ミドルウェア実装

### フロントエンド

- [ ] **1.5 ログイン画面**
  - ログインフォーム
  - パスワードリセット画面

- [ ] **1.6 共通レイアウト・ナビゲーション**
  - ロールごとのナビゲーションメニュー
  - ヘッダー・サイドバー
  - レスポンシブデザイン

- [ ] **1.7 ダッシュボード画面（各ロール）**
  - 営業支援会社ダッシュボード（プロジェクト一覧）
  - 顧客ダッシュボード（依頼プロジェクト一覧）
  - ワーカーダッシュボード（割り当てリスト一覧）

---

## フェーズ2: 営業支援会社の基本機能（顧客・プロジェクト管理）

### バックエンド

- [ ] **2.1 顧客管理データベーススキーマ**
  - 顧客組織テーブル
  - 顧客担当者テーブル

- [ ] **2.2 顧客管理API**
  - 顧客組織CRUD API
  - 顧客担当者CRUD API（複数担当者管理）
  - 顧客一覧取得API

- [ ] **2.3 営業支援会社担当者管理API**
  - 自社担当者CRUD API（複数担当者管理）
  - 自社担当者一覧取得API

- [ ] **2.4 プロジェクト管理データベーススキーマ**
  - プロジェクトテーブル（顧客組織との紐付け）

- [ ] **2.5 プロジェクト管理API**
  - プロジェクトCRUD API
  - プロジェクト一覧取得API（顧客フィルタ）

### フロントエンド

- [ ] **2.6 顧客管理画面**
  - 顧客一覧表示
  - 顧客登録・編集フォーム
  - 顧客担当者管理（複数登録・編集・削除）

- [ ] **2.7 営業支援会社担当者管理画面**
  - 自社担当者一覧表示
  - 担当者登録・編集フォーム

- [ ] **2.8 プロジェクト管理画面**
  - プロジェクト一覧表示
  - プロジェクト登録・編集フォーム
  - 顧客選択UI

---

## フェーズ3: リスト管理機能

### バックエンド

- [ ] **3.1 リスト管理データベーススキーマ**
  - リストテーブル（プロジェクトとの紐付け）
  - リスト項目テーブル（営業先企業情報）
  - カスタムカラム設定テーブル

- [ ] **3.2 リストCRUD API**
  - リスト作成API
  - リスト更新API
  - リスト削除API
  - リスト一覧取得API（プロジェクトフィルタ）

- [ ] **3.3 CSVインポート機能**
  - CSVアップロードAPI
  - カラムマッピング機能（カスタマイズ対応）
  - バリデーション（会社名・会社URL必須）
  - インポート実行API

- [ ] **3.4 リスト複製API**
  - リスト複製機能

- [ ] **3.5 NGリスト管理**
  - NGリストテーブル（リストごと）
  - NGリストCRUD API
  - ドメイン判定ロジック

- [ ] **3.6 リスト設定機能**
  - 送信禁止設定テーブル（曜日・時間帯・日付）
  - リスト設定CRUD API

- [ ] **3.7 リスト検収機能**
  - リストステータス管理
  - 検収完了API
  - 編集ロック機能

### フロントエンド

- [ ] **3.8 リスト管理画面**
  - リスト一覧表示（プロジェクトごと）
  - リスト作成・編集フォーム
  - リスト削除機能

- [ ] **3.9 CSVインポート画面**
  - CSVアップロードUI
  - カラムマッピング設定UI
  - プレビュー機能
  - インポート実行

- [ ] **3.10 リスト複製機能UI**
  - 複製ボタン・ダイアログ

- [ ] **3.11 NGリスト管理画面**
  - NGリスト登録・編集UI（リストごと）
  - ドメイン入力フォーム

- [ ] **3.12 リスト設定画面**
  - 送信禁止曜日設定UI
  - 送信禁止時間帯設定UI
  - 送信禁止日設定UI

- [ ] **3.13 リスト検収画面**
  - 検収ステータス表示
  - 検収完了ボタン

---

## フェーズ4: ワーカー管理・割り当て、スクリプト管理

### バックエンド

- [ ] **4.1 ワーカー管理データベーススキーマ**
  - ワーカーテーブル（ユーザーテーブルとの紐付け）

- [ ] **4.2 ワーカー管理API**
  - ワーカーCRUD API
  - ワーカー一覧取得API

- [ ] **4.3 ワーカー割り当てデータベーススキーマ**
  - リスト項目割り当てテーブル（ワーカーとの紐付け）
  - 重複割り当て防止ロジック

- [ ] **4.4 ワーカー割り当てAPI**
  - リストへのワーカー割り当てAPI（件数指定）
  - 割り当て済み企業の除外ロジック
  - 割り当て解除API

- [ ] **4.5 スクリプト管理データベーススキーマ**
  - スクリプトテーブル（リストごと）

- [ ] **4.6 スクリプト管理API**
  - スクリプトCRUD API
  - リストごとのスクリプト取得API

### フロントエンド

- [ ] **4.7 ワーカー管理画面**
  - ワーカー一覧表示
  - ワーカー登録・編集フォーム

- [ ] **4.8 ワーカー割り当て画面**
  - リストへのワーカー割り当てUI
  - 件数指定UI（開始行～終了行）
  - 割り当て済み企業の表示制御
  - 割り当て解除機能

- [ ] **4.9 スクリプト設定画面**
  - スクリプト登録・編集フォーム（リストごと）
  - 件名・本文入力UI

---

## フェーズ5: ワーカー作業機能

### バックエンド

- [ ] **5.1 作業記録データベーススキーマ**
  - 作業記録テーブル（送信済み・送信不可、日時記録）
  - 送信不可理由テーブル

- [ ] **5.2 ワーカー作業API**
  - 割り当てリスト取得API
  - 作業記録登録・更新API（送信済み・送信不可）
  - 作業日時自動記録
  - 送信制御ロジック（禁止曜日・時間帯・日付チェック）

- [ ] **5.3 送信不可理由管理**
  - 送信不可理由マスタAPI（営業支援会社がカスタマイズ）
  - チェックボックス形式対応

- [ ] **5.4 情報編集API**
  - リスト項目編集API（会社名以外）
  - ステータス変更API

- [ ] **5.5 質問機能**
  - 質問テーブル（企業ごと、ワーカーごと）
  - 質問投稿API
  - 質問取得API（営業支援会社向け）
  - 質問通知機能

### フロントエンド

- [ ] **5.6 ワーカー作業画面**
  - 割り当てリスト一覧表示
  - 企業情報表示（会社名、URL等）
  - スクリプト表示・コピーボタン

- [ ] **5.7 作業記録UI**
  - 送信済みボタン
  - 送信不可ボタン
  - 作業日時表示（自動記録）
  - 送信制御UI（禁止時間帯の警告・ボタン無効化）

- [ ] **5.8 送信不可理由選択UI**
  - チェックボックス形式（カスタマイズ対応）

- [ ] **5.9 情報編集UI**
  - URL編集フォーム
  - その他項目編集
  - ステータス変更機能

- [ ] **5.10 質問機能UI**
  - 質問投稿フォーム（企業ごと）
  - 質問履歴表示

- [ ] **5.11 営業支援会社向け質問管理画面**
  - 質問一覧表示
  - 回答機能
  - 通知表示

---

## フェーズ6: 進捗・分析機能

### バックエンド

- [ ] **6.1 進捗管理API**
  - リストごと進捗取得API（総件数、完了数、進捗率）
  - ワーカー単位進捗取得API
  - プロジェクト全体進捗API

- [ ] **6.2 分析レポートAPI**
  - 期間指定集計API
  - プロジェクトごと集計API
  - リストごと集計API（ABテスト対応）
  - 複数リスト合算集計API
  - 曜日ごと集計API
  - 時間帯ごと集計API
  - 週次集計API

- [ ] **6.3 データエクスポート機能**
  - CSV/ExcelエクスポートAPI

### フロントエンド

- [ ] **6.4 進捗管理画面（営業支援会社向け）**
  - リストごと進捗一覧表示
  - ワーカー単位進捗表示
  - プロジェクト全体進捗表示

- [ ] **6.5 進捗管理画面（顧客向け）**
  - 依頼プロジェクトの進捗表示

- [ ] **6.6 分析レポート画面**
  - 期間指定UI（日付範囲ピッカー）
  - プロジェクト選択UI
  - リスト選択UI（複数選択・ABテスト比較）
  - グラフ表示（曜日ごと、時間帯ごと、週次）
  - エクスポートボタン

---

## フェーズ7: 請求管理機能

### バックエンド

- [ ] **7.1 単価設定データベーススキーマ**
  - リストごと単価テーブル（受注単価、ワーカー単価）

- [ ] **7.2 単価設定API**
  - 単価CRUD API（リストごと）

- [ ] **7.3 実績集計API**
  - 送信成功件数集計
  - 受注金額自動計算API
  - ワーカー支払金額自動計算API
  - 期間指定・プロジェクト指定集計

### フロントエンド

- [ ] **7.4 単価設定画面**
  - リストごと単価設定UI（受注単価、ワーカー単価）

- [ ] **7.5 実績集計画面**
  - 送信成功件数表示
  - 受注金額表示
  - ワーカー支払金額表示
  - 期間指定・プロジェクト指定UI
  - エクスポート機能（請求書補助）

---

## 補足タスク

### 共通

- [ ] **セキュリティ対策**
  - 入力検証（XSS、SQLインジェクション対策）
  - CSRF対策
  - 権限チェック（全API）
  - セキュアなパスワード管理

- [ ] **パフォーマンス最適化**
  - データベースインデックス最適化
  - ページネーション実装
  - キャッシング戦略

- [ ] **テスト**
  - ユニットテスト
  - 統合テスト
  - E2Eテスト

- [ ] **ドキュメント**
  - API仕様書
  - 運用マニュアル
  - ユーザーマニュアル

---

## 優先度マトリクス

| フェーズ | 優先度 | 依存関係 |
|---------|--------|----------|
| フェーズ1 | **最優先** | なし（基盤） |
| フェーズ2 | **高** | フェーズ1 |
| フェーズ3 | **高** | フェーズ2 |
| フェーズ4 | **高** | フェーズ3 |
| フェーズ5 | **高** | フェーズ4 |
| フェーズ6 | **中** | フェーズ5 |
| フェーズ7 | **低** | フェーズ5 |
